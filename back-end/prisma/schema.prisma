// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model gamemode{
  id Int @id @default(autoincrement())
  name String
  hearts hearts[]
  game game[]
  gameSettings gameSettings[]
}

model hearts{
  modeId Int
  mode gamemode @relation(fields: [modeId], references: [id])
  id Int @id @default(autoincrement())
  img String
  @@unique([modeId,id])
}

model difficulty{
  id Int @id @default(autoincrement())
  name String
  game game[]
  gameSettings gameSettings[]
}

model game{
  modeId Int
  mode gamemode @relation(fields: [modeId], references: [id])
  difficultyId Int
  difficulty difficulty @relation(fields: [difficultyId], references: [id])
  @@id([modeId,difficultyId])
}

model gameSettings{
  modeId Int
  mode gamemode @relation(fields: [modeId], references: [id])
  difficultyId Int
  difficulty difficulty @relation(fields: [difficultyId], references: [id])
  miniId Int
  mini minigame @relation(fields: [miniId], references: [id])
  tentativas Int
  @@id([modeId,difficultyId,miniId])
}

model minigame{
  id Int @id @default(autoincrement())
  name String
  description String
  icon String
  logo String
  background String
  border String
  gameSettings gameSettings[]
  solutions solutions[]
  playerData playerData[]
  }

model solutions{
  miniId Int
  mini minigame @relation(fields: [miniId], references: [id])
  id Int @id @default(autoincrement())
  answer String
  img String
  @@unique([miniId,id])
}

model user{
  email String @id
  name String
  password String
  playerData playerData[]
  typeId Int
  type userType @relation(fields: [typeId], references: [id])
  @@unique([email,typeId])
}

model userType{
  id Int @id @default(autoincrement())
  name String
  user user[]
}

model playerData{
  userEmail String
  user user @relation(fields: [userEmail], references: [email])
  miniId Int
  mini minigame @relation(fields: [miniId], references: [id])
  id Int @id @default(autoincrement())
  points Int
  @@unique([userEmail,miniId,id])
}

model assets{
  id Int @id @default(autoincrement())
  dados String
}




//CREATE TABLE assets (
//id INTEGER PRIMARY KEY, 
//dados TEXT);

//CREATE TABLE modo_jogo (
//id INTEGER PRIMARY KEY, 
//nome TEXT,
//dif_opcoes TEXT,
//id_assets INTEGER, 
//FOREIGN KEY (id_assets) 
//REFERENCES assets(id));